{% extends 'base.html' %}
{% load humanize %}
{% load static %}
{% block style %}
<style>
    .payform {
        display: flex;
        flex-direction: column;
        margin-top: 20px;
    }

    .dataTables_filter {
        float: right;
    }

    .dataTables_filter input {
        margin-left: 0.5em;
        width: 200px;
        display: inline-block;
        margin-bottom: 10px;
    }
</style>
{% endblock %}
{% block content %}
<div class="tainer" style="margin-top: 20px;">
<ul class="nav nav-tabs" id="myTab" role="tablist">
    <li class="nav-item" role="presentation">
      <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home" type="button" role="tab" aria-controls="home" aria-selected="true">Bookings</button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="contact-tab" data-bs-toggle="tab" data-bs-target="#contact" type="button" role="tab" aria-controls="contact" aria-selected="false">Reservations</button>
      </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile" type="button" role="tab" aria-controls="profile" aria-selected="false">Requests</button>
    </li>
   
  </ul>
  <div class="tab-content" id="myTabContent">
    <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
        <h3 style="margin-top: 15px;">Bookings 
            <span><a class="btn btn-primary" href="{% url 'Book_A_Client' %}"><i class="fas fa-plus"></i></a></span></h3>
                <table class="table table-striped table-bordered" id="arrearTable">
                    <thead class="thead-dark">
                        <tr>
                            <th>Client</th>
                            <th>Room</th>
                            <th>Checked In</th>
                            <th>Checked Out</th>
                            <th>Adults</th>
                            <th>Children</th>
                            <th>Left</th>
                            <th>Booked By</th>
                            <th>Date</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for x in booked %}
                        <tr>
                            <td>{{ x.client.get_full_name }}</td>
                            <td>{{ x.room }}</td>
                            <td>{{x.Check_in}}</td>
                            <td>{{x.Check_out}}</td>
                            <td>{{x.adult}}</td>
                            <td>{{x.children}}</td>
                            <td>{{ x.out}}</td>
                            <td>{{ x.created_by}}</td>
                            <td>{{ x.created_on}}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            
    </div>
    
    <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
        <h2 style="margin-top: 15px;">Service Requests 
            <span><a class="btn btn-primary" href="{% url 'request_service' %}"><i class="fas fa-plus"></i></a></span>

        </h2>
                <table class="table table-bordered mt-4" id="arrearTable1">
                    <thead>
                        <tr>
                            <th scope="col">Service</th>
                            <th scope="col">Request To</th>
                            <th scope="col">Details</th>
                            <th scope="col">Delivered</th>
                            <th scope="col">Requested On</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for request in services %}
                        <tr>
                            <td>{{ request.service.name }}</td>
                            <td>{{ request.booked }}</td>
                            <td>{{ request.requested }}</td>
                            <td>
                                {% if request.delivered %}
                                <span class="badge bg-success">Delivered</span>
                                {% else %}
                                <span class="badge bg-warning">Pending</span>
                                {% endif %}
                            </td>
                            <td>{{ request.created_on|date:"M d, Y H:i" }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>

    </div>

    <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">
        <h3 style="margin-top: 15px;">Reservations
            <span><a class="btn btn-primary" href="{% url 'Book_A_Client' %}"><i class="fas fa-plus"></i></a></span></h3>
                <table class="table table-striped table-bordered" id="arrearTable3">
                    <thead class="thead-dark">
                        <tr>
                            <th>Client</th>
                            <th>Room</th>
                            <th>Checked In</th>
                            <th>Checked Out</th>
                            <th>Came In</th>
                            
                            <th>Date</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for x in reservation %}
                        <tr>
                            <td>{{ x.client.get_full_name }}</td>
                            <td>{{ x.room }}</td>
                            <td>{{x.Check_in}}</td>
                            <td>{{x.Check_out}}</td>
                            <td>{{x.comply}}</td>
                            <td>{{ x.created_on}}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
         
           </div>
  </div>
  </div>
  {% endblock %}


{% block js %}
<script src="{% static 'js/jquery.js' %}"></script>
<script src="{% static 'js/jquery.dataTables.min.js' %}"></script>
<script src="{% static 'js/dataTables.buttons.min.js' %}"></script>
<script src="{% static 'js/buttons.html5.min.js' %}"></script>
<script src="{% static 'js/buttons.print.min.js' %}"></script>
<script src="{% static 'js/jszip.min.js' %}"></script>
<script src="{% static 'js/pdfmake.min.js' %}"></script>
<script src="{% static 'js/vfs_fonts.js' %}"></script>
<script>
    $(document).ready(function () {
        $('#arrearTable').DataTable({
            dom: 'Bfrtip',
            buttons: [
                {
                    extend: 'copy',
                    text: 'Copy',
                    className: 'btn btn-secondary'
                },
                {
                    extend: 'csv',
                    text: 'CSV',
                    className: 'btn btn-secondary'
                },
                {
                    extend: 'excel',
                    text: 'Excel',
                    className: 'btn btn-secondary'
                },
                {
                    extend: 'pdf',
                    text: 'PDF',
                    className: 'btn btn-secondary'
                },
                {
                    extend: 'print',
                    text: 'Print',
                    className: 'btn btn-secondary'
                }
            ]
        });
    });
</script>
<script>
    $(document).ready(function () {
        $('#arrearTable1').DataTable({
            dom: 'Bfrtip',
            buttons: [
                {
                    extend: 'copy',
                    text: 'Copy',
                    className: 'btn btn-secondary'
                },
                {
                    extend: 'csv',
                    text: 'CSV',
                    className: 'btn btn-secondary'
                },
                {
                    extend: 'excel',
                    text: 'Excel',
                    className: 'btn btn-secondary'
                },
                {
                    extend: 'pdf',
                    text: 'PDF',
                    className: 'btn btn-secondary'
                },
                {
                    extend: 'print',
                    text: 'Print',
                    className: 'btn btn-secondary'
                }
            ]
        });
    });
</script>
<script>
    $(document).ready(function () {
        $('#arrearTable3').DataTable({
            dom: 'Bfrtip',
            buttons: [
                {
                    extend: 'copy',
                    text: 'Copy',
                    className: 'btn btn-secondary'
                },
                {
                    extend: 'csv',
                    text: 'CSV',
                    className: 'btn btn-secondary'
                },
                {
                    extend: 'excel',
                    text: 'Excel',
                    className: 'btn btn-secondary'
                },
                {
                    extend: 'pdf',
                    text: 'PDF',
                    className: 'btn btn-secondary'
                },
                {
                    extend: 'print',
                    text: 'Print',
                    className: 'btn btn-secondary'
                }
            ]
        });
    });
</script>
{% endblock %}